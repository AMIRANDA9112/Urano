{%extends 'feed/base.html'%}


{%block content%}



    <section class = "bg-gray-900 text-gray-100">

        <div class = "grid grid-cols-1 justify-items-center ">

        <div class = "w-full h-auto justify-center justify-self-center text-center">

            <form method="post" enctype="multipart/form-data">

                {% csrf_token %}



                <div class="pt-8 px-8 text-gray-900 rounded">

                    <div class="my-2">
                                {{ form.text.errors }}
                                {{ form.text }}
                            </div>

                    <div class="grid grid-cols-2 justify-center text-gray-100">


                         <div class="grid grid-cols-1 my-2 mx-2">

                            {{ form.img.errors }}
                            <div  id = "button" class="relative border-dotted h-20 rounded-lg border-dashed border-2 border-gray-300 bg-blue-100 hover:bg-gray-500 flex justify-center items-center overflow-hidden">
                                <div class="absolute ">

                                    <div class="flex flex-col justify-items-center">

                                    <ul id="gallery" class="justify-items-center">


                                            <li id="empty" class="w-full text-center  justify-center">
                                                <i class="fa fa-file-image-o fa-lg text-gray-700"></i>

                                            </li>

                                        </ul>

                                        </div>

                                </div>
                                </div>{{ form.img }}

                                 <div>
                            <button class = "hover:bg-gray-500 bg-gray-900 text-gray-100
                                                    py-2 px-4 rounded" type = "button" id = "cancel"><i class="fa fa-trash-o fa-lg text-gray-700"></i></button>
                            </div>

                          </div>

                          <div class="grid grid-cols-1 my-2 mx-2">

                            {{ form.img2.errors }}
                            <div id = "button2" class="relative border-dotted h-20 rounded-lg border-dashed border-2 border-gray-300 bg-blue-100 hover:bg-gray-500 flex justify-center items-center overflow-hidden">
                            <div class="absolute">

                                <div class="flex flex-col items-center">

                                <ul id="gallery2" class="justify-items-center ">


                                            <li id="empty2" class="w-full text-center  justify-center">
                                                <i class="fa fa-file-image-o  fa-lg text-gray-700" ></i>

                                            </li>

                                        </ul>
                                    </div>
                            </div>



                            </div>{{ form.img2 }}

                            <div>
                            <button class = "hover:bg-gray-500 bg-gray-900 text-gray-100
                                                    py-2 px-4 rounded" type = "button" id = "cancel2"><i class="fa fa-trash-o fa-lg text-gray-700"></i></button>
                            </div>




                            </div>
                   </div>

                    <div class="grid grid-cols-2 justify-center">

                         <div class="grid grid-cols-1  my-2 mx-2">

                             {{ form.video.errors }}
                            <div id="button3" class="relative border-dotted h-20 rounded-lg border-dashed border-2 border-gray-300 bg-blue-100 hover:bg-gray-500 flex justify-center items-center overflow-hidden">
                                <div class="absolute ">

                                    <div class="flex flex-col items-center">

                                    <ul id="gallery3" class="justify-items-center ">


                                            <li id="empty3" class="w-full text-center  justify-center">
                                                <i class="fa fa-file-video-o  fa-lg text-gray-700" ></i>

                                                 </li>

                                                </ul>

                                                 </div>


                                                </div>
                                </div>{{ form.video }}

                                    <div>
                            <button class = "hover:bg-gray-500 bg-gray-900 text-gray-100
                                                    py-2 px-4 rounded" type = "button" id = "cancel3"><i class="fa fa-trash-o fa-lg text-gray-700"></i></button>
                            </div>


                             </div>

                             <div class="grid grid-cols-1  my-2 mx-2">

                             {{ form.pdf.errors }}
                            <div id="button4" class="relative border-dotted h-20 rounded-lg border-dashed border-2 border-gray-300 bg-blue-100 hover:bg-gray-500 flex justify-center items-center overflow-hidden">
                                <div class="absolute ">

                                    <div class="flex flex-col items-center">

                                    <ul id="gallery4" class="justify-items-center ">


                                            <li id="empty4" class="w-full text-center  justify-center">
                                                <i class="fa fa-file-pdf-o  fa-lg text-gray-700" ></i>

                                                 </li>

                                                </ul>

                                                 </div>


                                                </div>
                                </div>{{ form.pdf }}

                                    <div>
                            <button class = "hover:bg-gray-500 bg-gray-900 text-gray-100
                                                    py-2 px-4 rounded" type = "button" id = "cancel4"><i class="fa fa-trash-o fa-lg text-gray-700"></i></button>
                            </div>


                             </div>



                                        </div>


                    </div>


            <button class = "hover:bg-gray-500 bg-gray-800 text-gray-100
                                                    py-2 px-4 rounded" type = "submit">Publicar</button>


            </form>

        </div>

             </div>
    </section>

   <template id="file-template">
      <li class=" p-1 w-16 h-auto">
        <article tabindex="0" class="group w-full h-full rounded-md focus:outline-none focus:shadow-outline elative bg-gray-100 cursor-pointer relative shadow-sm">
          <img alt="upload preview" class="img-preview hidden w-full h-auto sticky object-cover rounded-md bg-fixed" />

          <section class="flex flex-col rounded-md text-xs break-words w-full h-auto absolute top-0 py-2 px-3">

            <div class="flex">
              <span class="p-1 text-blue-800">
                <i>
                  <svg class="fill-current w-4 h-4 ml-auto pt-1" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24">
                    <path d="M15 2v5h5v15h-16v-20h11zm1-2h-14v24h20v-18l-6-6z" />
                  </svg>
                </i>
              </span>
              <p class="p-1 size text-base	 text-gray-700"></p>
            </div>
          </section>
        </article>
      </li>
    </template>

    <template id="image-template">
      <li class="h-full w-full text-center flex flex-col items-center justify-center items-center">
        <article tabindex="0" class="group hasImage w-full h-full rounded-md focus:outline-none focus:shadow-outline bg-gray-100 cursor-pointer relative text-transparent hover:text-white shadow-sm">
          <img alt="upload preview" class="img-preview w-full h-full sticky object-cover rounded-md bg-fixed" />

          <section class="flex flex-col rounded-md text-xs break-words w-full h-auto absolute top-0 py-2 px-3">
            <h1 class="flex-1"></h1>
            <div class="flex">
              <span class="p-1">
                <i>
                  <svg class="fill-current w-4 h-4 ml-auto pt-" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24">
                    <path d="M5 8.5c0-.828.672-1.5 1.5-1.5s1.5.672 1.5 1.5c0 .829-.672 1.5-1.5 1.5s-1.5-.671-1.5-1.5zm9 .5l-2.519 4-2.481-1.96-4 5.96h14l-5-8zm8-4v14h-20v-14h20zm2-2h-24v18h24v-18z" />
                  </svg>
                </i>
              </span>

              <p class="p-1 size text-xs"></p>
            </div>
          </section>
        </article>
      </li>
    </template>

<script>
const fileTempl = document.getElementById("file-template"),
  imageTempl = document.getElementById("image-template"),
  empty = document.getElementById("empty"),
  empty2 = document.getElementById("empty2"),
  empty3 = document.getElementById("empty3"),
  empty4 = document.getElementById("empty4");


// use to store pre selected files


// check if file is of type image and prepend the initialied
// template to the target element
function addFile(target, file) {
  const isImage = file.type.match("image.*"),
    objectURL = URL.createObjectURL(file);

  const clone = isImage
    ? imageTempl.content.cloneNode(true)
    : fileTempl.content.cloneNode(true);

  clone.querySelector("li").id = objectURL;
  clone.querySelector(".size").textContent =
    file.size > 1024
      ? file.size > 1048576
        ? Math.round(file.size / 1048576) + "mb"
        : Math.round(file.size / 1024) + "kb"
      : file.size + "b";

  isImage &&
    Object.assign(clone.querySelector("img"), {
      src: objectURL,
      alt: file.name
    });


  target.parentNode.replaceChild(clone, target);


}

const gallery = document.getElementById("gallery");



// click the hidden input of type file if the visible button is clicked
// and capture the selected files
const hidden = document.getElementById("hidden-input");
document.getElementById("button").onclick = () => hidden.click();
hidden.onchange = (e) => {
  for (const file of e.target.files) {
    const first = gallery.firstChild;

    addFile(first, file);
    while (gallery.children.length > 1) {
    gallery.lastChild.remove();
  };

  }
};

document.getElementById("cancel").onclick = () => {
  while (gallery.children.length > 0) {
    gallery.lastChild.remove();

  }
  gallery.prepend(empty);
  document.getElementById('hidden-input').value= null;


};





const gallery2 = document.getElementById("gallery2");

const hidden2 = document.getElementById("hidden-input2");
document.getElementById("button2").onclick = () => hidden2.click();
hidden2.onchange = (e) => {
  for (const file of e.target.files) {


    const first = gallery2.firstChild;

    addFile(first, file);
    while (gallery2.children.length > 1) {
    gallery2.lastChild.remove();
  };

  }
};

document.getElementById("cancel2").onclick = () => {
  while (gallery2.children.length > 0) {
    gallery2.lastChild.remove();

  }
  gallery2.prepend(empty2);
  document.getElementById('hidden-input2').value= null;


};



const gallery3 = document.getElementById("gallery3");

const hidden3 = document.getElementById("hidden-input3");
document.getElementById("button3").onclick = () => hidden3.click();
hidden3.onchange = (e) => {
  for (const file of e.target.files) {


    const first = gallery3.firstChild;

    addFile(first, file);
    while (gallery3.children.length > 1) {
    gallery3.lastChild.remove();
  };

  }
};


document.getElementById("cancel3").onclick = () => {
  while (gallery3.children.length > 0) {
    gallery3.lastChild.remove();

  }
  gallery3.prepend(empty3);
  document.getElementById('hidden-input3').value= null;


};


const gallery4 = document.getElementById("gallery4");

const hidden4 = document.getElementById("hidden-input4");
document.getElementById("button4").onclick = () => hidden4.click();
hidden4.onchange = (e) => {
  for (const file of e.target.files) {


    const first = gallery4.firstChild;

    addFile(first, file);
    while (gallery4.children.length > 1) {
    gallery4.lastChild.remove();
  };

  }
};


document.getElementById("cancel4").onclick = () => {
  while (gallery4.children.length > 0) {
    gallery4.lastChild.remove();

  }
  gallery4.prepend(empty4);
  document.getElementById('hidden-input4').value= null;


};


</script>



<style>
.hasImage:hover section {
  background-color: rgba(5, 5, 5, 0.4);
}
.hasImage:hover button:hover {
  background: rgba(5, 5, 5, 0.45);
}


.group:hover .group-hover\:text-blue-800 {
  color: #2b6cb0;
}
</style>


{%endblock content%}


